<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PGSoft API Dashboard</title>

  <!-- React -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

  <!-- TailwindCSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    body {
      margin: 0;
      padding: 0;
      background-color: #0f172a;
      color: #e2e8f0;
      font-family: 'Inter', sans-serif;
    }
  </style>
</head>
<body>
  <div id="root" class="min-h-screen flex items-center justify-center"></div>

  <script type="text/javascript">
    const { useState, useEffect } = React;
    const API_BASE_URL = "https://pg-api-pg.rkfmzx.easypanel.host";

    function PGSoftAPIFrontend() {
      const [games, setGames] = useState([]);
      const [loading, setLoading] = useState(false);
      const [apiResponse, setApiResponse] = useState(null);
      const [selectedGame, setSelectedGame] = useState(null);

      const pgGames = [
        { id: "fortune-tiger", name: "Fortune Tiger", icon: "ðŸ¯" },
        { id: "fortune-rabbit", name: "Fortune Rabbit", icon: "ðŸ°" },
        { id: "fortune-ox", name: "Fortune Ox", icon: "ðŸ‚" },
        { id: "fortune-mouse", name: "Fortune Mouse", icon: "ðŸ­" },
        { id: "ganesha-gold", name: "Ganesha Gold", icon: "ðŸ˜" },
        { id: "double-fortune", name: "Wild Bounty Showdown", icon: "ðŸ¤ " },
        { id: "jungle-delight", name: "Candy Bonanza", icon: "ðŸ¬" },
        { id: "bikine-paradise", name: "Bikini Paradise", icon: "ðŸ–ï¸" },
        { id: "fortune-dragon", name: "Dragon Hatch", icon: "ðŸ‰" },
        { id: "dragon-tiger-luck", name: "Mahjong Ways 2", icon: "ðŸ€„" },
      ];

      useEffect(() => {
        setGames(pgGames);
      }, []);

      const makeAPICall = async (endpoint, method = "POST", body = null) => {
        setLoading(true);
        try {
          const response = await fetch(API_BASE_URL + endpoint, {
            method,
            headers: { "Content-Type": "application/json" },
            body: body ? JSON.stringify(body) : undefined,
          });

          const data = await response.json();
          setApiResponse({
            endpoint,
            method,
            status: response.status,
            data,
            timestamp: new Date().toLocaleString(),
          });
        } catch (err) {
          setApiResponse({
            endpoint,
            error: err.message,
            timestamp: new Date().toLocaleString(),
          });
        } finally {
          setLoading(false);
        }
      };

      const handleGameInfo = (game) => {
        setSelectedGame(game);
        makeAPICall(`/game-api/${game.id}/v2/GameInfo/Get`);
      };

      const handleSpin = (game) => {
        makeAPICall(`/game-api/${game.id}/v2/Spin`);
      };

      return React.createElement(
        "div",
        { className: "p-8 max-w-5xl w-full" },
        React.createElement(
          "h1",
          { className: "text-3xl font-bold mb-6 text-center" },
          "ðŸŽ° PGSoft API Dashboard"
        ),

        React.createElement(
          "div",
          { className: "grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4 mb-8" },
          games.map((game) =>
            React.createElement(
              "button",
              {
                key: game.id,
                className: `p-4 rounded-xl border border-slate-600 hover:bg-slate-700 transition ${
                  selectedGame && selectedGame.id === game.id ? "bg-slate-700" : ""
                }`,
                onClick: () => handleGameInfo(game),
              },
              React.createElement("div", { className: "text-4xl" }, game.icon),
              React.createElement("div", { className: "text-sm mt-2" }, game.name)
            )
          )
        ),

        selectedGame &&
          React.createElement(
            "div",
            { className: "mb-6 text-center" },
            React.createElement(
              "h2",
              { className: "text-xl font-semibold mb-2" },
              `ðŸŽ® ${selectedGame.name}`
            ),
            React.createElement(
              "button",
              {
                className:
                  "bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition",
                onClick: () => handleSpin(selectedGame),
              },
              "ðŸŽ¯ Fazer SPIN"
            )
          ),

        loading
          ? React.createElement(
              "p",
              { className: "text-center text-yellow-400" },
              "Carregando..."
            )
          : apiResponse
          ? React.createElement(
              "pre",
              {
                className:
                  "bg-slate-800 p-4 rounded-xl text-xs overflow-auto max-h-[400px]",
              },
              JSON.stringify(apiResponse, null, 2)
            )
          : React.createElement(
              "p",
              { className: "text-center text-slate-400" },
              "Selecione um jogo para comeÃ§ar."
            )
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(
      React.createElement(PGSoftAPIFrontend)
    );
  </script>
</body>
</html>
